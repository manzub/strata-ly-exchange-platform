{"remainingRequest":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/components/Sell.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/components/Sell.vue","mtime":1622745125688},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwppbXBvcnQgYXBpIGZyb20gJy4uL2FwaScKaW1wb3J0IEFsZXJ0IGZyb20gJy4vQWxlcnQudnVlJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTZWxsJywKICBjb21wb25lbnRzOiB7IEFsZXJ0IH0sCiAgZGF0YSAoKSB7IHJldHVybiB7IGRpc2FibGVkOnRydWUsIGdhc19mZWU6ICcwLjAwMCcsIGFtb3VudDowLCB1c2RfdmFsdWU6IDAsIGFsZXJ0czp7IHNob3c6ZmFsc2UsIG1zZzonJyB9IH0gfSwKICBjb21wdXRlZDogeyAKICAgIC4uLm1hcEdldHRlcnMoWydhdXRoJ10pLAogICAgYmFsYW5jZSgpIHsgcmV0dXJuIHBhcnNlRmxvYXQodGhpcy5hdXRoLnJlY29yZHMuYmFsYW5jZSkudG9GaXhlZCg2KSB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBtYXhBbW91bnQoKSB7CiAgICAgIHRoaXMuYW1vdW50ID0gdGhpcy5hdXRoLnJlY29yZHMuYmFsYW5jZQogICAgICB0aGlzLmNhbGNGZWVzKCkKICAgIH0sCiAgICBjYWxjRmVlcyhldmVudCkgewogICAgICB0aGlzLmlzRGlzYWJsZWQoKQogICAgICB2YXIgdmFsdWUgPSBldmVudCA/IGV2ZW50LnRhcmdldC52YWx1ZSA6IHRoaXMuYW1vdW50CiAgICAgIGFwaS5nZXRHYXNGZWUodmFsdWUgfHwgMCkudGhlbihyZXNwb25zZSA9PiB0aGlzLmdhc19mZWUgPSByZXNwb25zZSApCiAgICB9LAogICAgY2hlY2tQYXlvdXRTdGF0ZSgpIHsKICAgICAgaWYoIXRoaXMuYXV0aC5vcHRpb25zLmFkZHJlc3MpIHsKICAgICAgICB0aGlzLmFsZXJ0cy5zaG93ID0gdHJ1ZQogICAgICAgIHRoaXMuYWxlcnRzLm1zZyA9ICdQbGVhc2UgYWRkIGEgcGF5b3V0IGFkZHJlc3MnCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH1lbHNlIHJldHVybiB0cnVlCiAgICB9LAogICAgaXNEaXNhYmxlZCgpIHsKICAgICAgdGhpcy5kaXNhYmxlZCA9IHRoaXMuYW1vdW50ICE9IDAgPyBmYWxzZSA6IHRydWUKICAgIH0sCiAgICBwcm9jY2VzcygpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAvLyBjb3ZlcnQgdXNkIHRvIHN0cmEKICAgICAgYXBpLmNvbnZlcnRTdHJhdGFUb1VzZChOdW1iZXIodGhpcy5hbW91bnQpKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBzZWxmLnVzZF92YWx1ZSA9IE51bWJlcihyZXNwb25zZSk7CiAgICAgICAgcmV0dXJuIGFwaS5zZW5kVHJhbnNhY3Rpb24oeyBzZW5kZXI6c2VsZi5hdXRoLmluZm8ud2FsbGV0QWRkcmVzcywgYW1vdW50OnNlbGYuYW1vdW50IH0pCiAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmKHJlc3BvbnNlLnN0YXR1cyA9PSAxKSB7CiAgICAgICAgICAvLyBzdWNjZXNzIGFsZXJ0CiAgICAgICAgICB2YXIgZG9uZV9hdWRpbyA9IG5ldyBBdWRpbygnYXNzZXRzL2F1ZGlvL2F1ZGlvMS5tcDMnKQogICAgICAgICAgZG9uZV9hdWRpby5wbGF5KCkKICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN0cmFuc2FjdCIpLmlubmVySFRNTCA9IGA8aW9uLWljb24gbmFtZT0iY2hlY2ttYXJrLWNpcmNsZS1vdXRsaW5lIj48L2lvbi1pY29uPmAKICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlCiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN0cmFuc2FjdCIpLmlubmVySFRNTCA9IGBTZWxsYAogICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgfWVsc2UgewogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3RyYW5zYWN0IikuaW5uZXJIVE1MID0gYDxpb24taWNvbiBuYW1lPSJjbG9zZS1jaXJjbGUtb3V0bGluZSI+PC9pb24taWNvbj5gCiAgICAgICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdHJhbnNhY3QiKS5pbm5lckhUTUwgPSBgU2VsbGAKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmNoZWNrUGF5b3V0U3RhdGUoKQogIH0KfQo="},{"version":3,"sources":["Sell.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Sell.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"tab-pane fade\" id=\"sell\" role=\"tabpanel\">\n    <div class=\"section mt-2\">\n      <alert v-if=\"alerts.show\" :msg=\"alerts.msg\" />\n      <div class=\"card\">\n        <div class=\"card-body\">\n          <strong>\n          Balance: {{ balance }}  <button @click=\"maxAmount\" class=\"ml-3 btn btn-primary\">MAX</button> \n          </strong>\n          <form @submit.prevent.enter=\"\">\n            <div class=\"form-group basic\">\n              <label class=\"label\">Enter Amount in STRLY</label>\n              <div class=\"input-group mb-1\">\n                <div class=\"input-group-prepend\">\n                  <span style=\"font-size: 20px !important;\" class=\"input-group-text\" id=\"input1\">STRLY</span>\n                </div>\n                <input @keyup=\"calcFees\" v-model=\"amount\" style=\"font-size: 30px !important;\" type=\"text\" class=\"text-center form-control form-control-lg\">\n              </div>\n            </div>\n            <div class=\"form-group basic\">\n              <h6 v-show=\"gas_fee != '0.000'\">Gas Fee: {{ gas_fee }}</h6>\n              <button id=\"transact\" :disabled=\"disabled\" @click=\"proccess\" class=\"btn btn-outline-primary btn-block btn-lg\">SELL</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport api from '../api'\nimport Alert from './Alert.vue'\n\nexport default {\n  name: 'Sell',\n  components: { Alert },\n  data () { return { disabled:true, gas_fee: '0.000', amount:0, usd_value: 0, alerts:{ show:false, msg:'' } } },\n  computed: { \n    ...mapGetters(['auth']),\n    balance() { return parseFloat(this.auth.records.balance).toFixed(6) }\n  },\n  methods: {\n    maxAmount() {\n      this.amount = this.auth.records.balance\n      this.calcFees()\n    },\n    calcFees(event) {\n      this.isDisabled()\n      var value = event ? event.target.value : this.amount\n      api.getGasFee(value || 0).then(response => this.gas_fee = response )\n    },\n    checkPayoutState() {\n      if(!this.auth.options.address) {\n        this.alerts.show = true\n        this.alerts.msg = 'Please add a payout address'\n        return false\n      }else return true\n    },\n    isDisabled() {\n      this.disabled = this.amount != 0 ? false : true\n    },\n    proccess() {\n      var self = this;\n      // covert usd to stra\n      api.convertStrataToUsd(Number(this.amount)).then(response => {\n        self.usd_value = Number(response);\n        return api.sendTransaction({ sender:self.auth.info.walletAddress, amount:self.amount })\n      }).then(response => {\n        if(response.status == 1) {\n          // success alert\n          var done_audio = new Audio('assets/audio/audio1.mp3')\n          done_audio.play()\n          document.querySelector(\"#transact\").innerHTML = `<ion-icon name=\"checkmark-circle-outline\"></ion-icon>`\n          this.disabled = true\n          setTimeout(() => {\n            this.disabled = false\n            document.querySelector(\"#transact\").innerHTML = `Sell`\n          }, 2000);\n        }else {\n          document.querySelector(\"#transact\").innerHTML = `<ion-icon name=\"close-circle-outline\"></ion-icon>`\n          this.disabled = true\n          setTimeout(() => {\n            this.disabled = false\n            document.querySelector(\"#transact\").innerHTML = `Sell`\n          }, 1000);\n        }\n      })\n    }\n  },\n  created() {\n    this.checkPayoutState()\n  }\n}\n</script>\n"]}]}