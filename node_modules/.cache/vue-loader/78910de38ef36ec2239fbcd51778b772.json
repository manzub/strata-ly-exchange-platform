{"remainingRequest":"/Users/mac/Sites/VUE/exchangeapp-version-control/v3/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Sites/VUE/exchangeapp-version-control/v3/src/components/ExchangeActionSheet.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v3/src/components/ExchangeActionSheet.vue","mtime":1627506005871},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v3/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v3/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IGFwaSBmcm9tICcuLi9hcGknCiAgZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsgcmV0dXJuIHsgY29pbnM6W10sIGRpc2FibGVkOiB0cnVlLCBleGNoYW5nZV9hbW91bnQ6IDAsIGFtb3VudDogMCwgZXhjaGFuZ2VfdG86ICdzdHJhdGFseScsIGV4Y2hhbmdlX2Zyb206ICdidGMnLCB0b1VzZDowIH0gfSwKICAgIG5hbWU6ICdFeGNoYW5nZUFjdGlvblNoZWV0JywKICAgIHByb3BzOlsnc3dhcCddLAogICAgY29tcHV0ZWQ6IHsgCiAgICAgICAgLi4ubWFwR2V0dGVycyhbJ2F1dGgnXSksCiAgICAgICAgaXNTd2FwaW5nKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jb2lucy5pbmNsdWRlcyh0aGlzLnN3YXApCiAgICAgICAgfSAKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgbWF4KCkgewogICAgICAgICAgICB2YXIgc3RyID0gdGhpcy5zd2FwLmJhbGFuY2UgLSAodGhpcy5zd2FwLmJhbGFuY2UgKiAwLjAwMik7CiAgICAgICAgICAgIHRoaXMuYW1vdW50ID0gc3RyLnRvRml4ZWQoOCk7CiAgICAgICAgICAgIHRoaXMuY29udmVydCgpIAogICAgICAgIH0sCiAgICAgICAgY29udmVydCgpIHsKICAgICAgICAgICAgdmFyIHRvVXNkID0gdGhpcy5hbW91bnQqdGhpcy5zd2FwLnZhbHVlOwogICAgICAgICAgICB0aGlzLnRvVXNkID0gdG9Vc2QudG9GaXhlZCgyKQogICAgICAgICAgICBzd2l0Y2ggKHRoaXMuZXhjaGFuZ2VfdG8pIHsKICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmF0YWx5JzoKICAgICAgICAgICAgICAgICAgICBhcGkuY29udmVydFVzZFRvU3RyYXRhKHRvVXNkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leGNoYW5nZV9hbW91bnQgPSByZXNwb25zZQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdidGMnOgogICAgICAgICAgICAgICAgICAgIGlmKGAke3RoaXMuYW1vdW50fWAuc3BsaXQoJy4nKVswXS5sZW5ndGggPj0gNykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnRjX3ZhbHVlID0gdGhpcy5jb2lucy5maW5kKGNvaW4gPT4gY29pbi5uYW1lID09ICdCVEMnKS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0ciA9IHRvVXNkL051bWJlcihidGNfdmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhjaGFuZ2VfYW1vdW50ID0gcGFyc2VJbnQodG9Vc2QpLnRvRml4ZWQoMCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHNlbGVjdGVkKGV2ZW50KSB7IAogICAgICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBzdHIgPSBldmVudC50YXJnZXQudmFsdWUgPT0gJ1NUUkxZJyA/ICdzdHJhdGFseScgOiBldmVudC50YXJnZXQudmFsdWU7CiAgICAgICAgICAgIHZhciBzdHIyID0gZXZlbnQudGFyZ2V0LnZhbHVlID09ICdTVFJMWScgPyAnYnRjJyA6ICdzdHJhdGFseSc7CiAgICAgICAgICAgIHRoaXMuZXhjaGFuZ2VfZnJvbSA9IHN0cjIudG9Mb3dlckNhc2UoKQogICAgICAgICAgICB0aGlzLmV4Y2hhbmdlX3RvID0gc3RyLnRvTG93ZXJDYXNlKCkKICAgICAgICB9LAogICAgICAgIHByb2Nlc3MoKSB7CiAgICAgICAgICAgIHRoaXMuY29udmVydCgpCiAgICAgICAgICAgIHZhciBmcm9tX2Ftb3VudCA9IHRoaXMuZXhjaGFuZ2VfZnJvbSA9PSAnc3RyYXRhbHknID8gdGhpcy5hbW91bnQgOiB0aGlzLnRvVXNkOwogICAgICAgICAgICBhcGkuc3dhcENvaW5zKHRoaXMuYXV0aC5pbmZvLCB0aGlzLmV4Y2hhbmdlX2Zyb20sIHRoaXMuZXhjaGFuZ2VfdG8sIGZyb21fYW1vdW50LCB0aGlzLmV4Y2hhbmdlX2Ftb3VudCkKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4geyAKICAgICAgICAgICAgICAgIHZhciB7IHN0YXR1cyB9ID0gcmVzcG9uc2U7CiAgICAgICAgICAgICAgICBpZihzdGF0dXMgPT0gJ3NpZ25lZCcgfHwgc3RhdHVzID09ICdwZW5kaW5nJykgewogICAgICAgICAgICAgICAgICAgIHZhciBkb25lX2F1ZGlvID0gbmV3IEF1ZGlvKCdhc3NldHMvYXVkaW8vYXVkaW8xLm1wMycpCiAgICAgICAgICAgICAgICAgICAgZG9uZV9hdWRpby5wbGF5KCkKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdHJhZGUiKS5pbm5lckhUTUwgPSBgPGlvbi1pY29uIG5hbWU9ImNoZWNrbWFyay1jaXJjbGUtb3V0bGluZSI+PC9pb24taWNvbj5gCiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN0cmFkZSIpLmlubmVySFRNTCA9IGBEb25lYAogICAgICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIGFwaS5mZXRjaEFsbENvaW5zKCkudGhlbihyZXNwb25zZT0+e3RoaXMuY29pbnMgPSByZXNwb25zZX0pCiAgICB9CiAgfQo="},{"version":3,"sources":["ExchangeActionSheet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ExchangeActionSheet.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"modal fade action-sheet\" id=\"exchangeActionSheet\" tabindex=\"-1\" role=\"dialog\" style=\"display: none;\" aria-hidden=\"true\">\n    <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h5 class=\"modal-title\">Swap</h5>\n            </div>\n            <div class=\"modal-body\">\n                <div class=\"action-sheet-content\">\n                    <form @submit.prevent=\"\">\n                        <div class=\"row\">\n                            <div class=\"col-6\">\n                                <div class=\"form-group basic\">\n                                    <div class=\"input-wrapper\">\n                                        <label class=\"label\" for=\"currency1\">From</label>\n                                        <select class=\"form-control custom-select\" id=\"currency1\">\n                                            <option value=\"1\">{{ swap.name }}</option>\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"col-6\">\n                                <div class=\"form-group basic\">\n                                    <div class=\"input-wrapper\">\n                                        <label class=\"label\" for=\"currency2\">To</label>\n                                        <select @change=\"selected\" class=\"form-control custom-select\" id=\"currency2\">\n                                            <option>Select a coin</option>\n                                            <option v-if=\"swap.name == 'BTC'\">STRLY</option>\n                                            <option v-else>BTC</option>\n                                            <!-- <option v-for=\"(coin, index) in coins\" :key=\"index\" :value=\"coin.name\">{{coin.name}}</option> -->\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"form-group-basic\">\n                            <label class=\"label\">Balance:</label>\n                            <strong>{{swap.balance}}</strong>\n                        </div>\n                        <div class=\"form-group basic\">\n                            <label class=\"label\">Enter Amount</label>\n                            <div class=\"input-group mb-0\">\n                                <div class=\"input-group-prepend\">\n                                    <span class=\"input-group-text text-muted\" id=\"input1\">{{swap.name}}</span>\n                                </div>\n                                <input @keyup=\"convert\" type=\"number\" class=\"form-control form-control-lg\" v-model=\"amount\">\n                                <div class=\"input-group-addon\">\n                                    <span @click=\"max\" class=\"btn btn-primary\">MAX</span>\n                                </div>\n                            </div>\n                            <small v-if=\"swap.name == 'STRLY'\">Minimum 1,000,000 STRLY</small>\n                        </div>\n                        <div class=\"form-group\">\n                            <p class=\"text-muted\">${{toUsd}}</p>\n                        </div>\n                        <div class=\"form-group basic\">\n                            <button id=\"trade\" :disabled=\"disabled\" @click=\"process\" type=\"button\" class=\"btn btn-primary btn-block btn-lg\">Swap</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport api from '../api'\n  export default {\n    data() { return { coins:[], disabled: true, exchange_amount: 0, amount: 0, exchange_to: 'strataly', exchange_from: 'btc', toUsd:0 } },\n    name: 'ExchangeActionSheet',\n    props:['swap'],\n    computed: { \n        ...mapGetters(['auth']),\n        isSwaping() {\n            return this.coins.includes(this.swap)\n        } \n    },\n    methods: {\n        max() {\n            var str = this.swap.balance - (this.swap.balance * 0.002);\n            this.amount = str.toFixed(8);\n            this.convert() \n        },\n        convert() {\n            var toUsd = this.amount*this.swap.value;\n            this.toUsd = toUsd.toFixed(2)\n            switch (this.exchange_to) {\n                case 'strataly':\n                    api.convertUsdToStrata(toUsd).then(response => {\n                        this.exchange_amount = response\n                    })\n                    break;\n                case 'btc':\n                    if(`${this.amount}`.split('.')[0].length >= 7) {\n                        var btc_value = this.coins.find(coin => coin.name == 'BTC').value;\n                        var str = toUsd/Number(btc_value)\n                        this.exchange_amount = parseInt(toUsd).toFixed(0)\n                    }\n                    break;\n            }\n        },\n        selected(event) { \n            this.disabled = false;\n            var str = event.target.value == 'STRLY' ? 'strataly' : event.target.value;\n            var str2 = event.target.value == 'STRLY' ? 'btc' : 'strataly';\n            this.exchange_from = str2.toLowerCase()\n            this.exchange_to = str.toLowerCase()\n        },\n        process() {\n            this.convert()\n            var from_amount = this.exchange_from == 'strataly' ? this.amount : this.toUsd;\n            api.swapCoins(this.auth.info, this.exchange_from, this.exchange_to, from_amount, this.exchange_amount)\n            .then(response => { \n                var { status } = response;\n                if(status == 'signed' || status == 'pending') {\n                    var done_audio = new Audio('assets/audio/audio1.mp3')\n                    done_audio.play()\n                    document.querySelector(\"#trade\").innerHTML = `<ion-icon name=\"checkmark-circle-outline\"></ion-icon>`\n                    setTimeout(() => {\n                        document.querySelector(\"#trade\").innerHTML = `Done`\n                    }, 1000);\n                }\n            })\n        }\n    },\n    created() {\n        api.fetchAllCoins().then(response=>{this.coins = response})\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>"]}]}