{"remainingRequest":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/views/Home.vue?vue&type=style&index=0&id=fae5bece&scoped=true&lang=css&","dependencies":[{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/views/Home.vue","mtime":1621627665675},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLndhbGxldC1mb290ZXJ7CiAgICBib3JkZXItdG9wOiBub25lOwogICAgcGFkZGluZy10b3A6IDBweDsKfQouYmFsYW5jZS5wLTMgewogICAgcGFkZGluZzogMXJlbSAhaW1wb3J0YW50Owp9Ci5jYXJkIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiBub25lOwp9Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div v-if=\"isLoggedIn\" class=\"home\">\n    <!-- <Header /> -->\n    <!-- <div id=\"appCapsule\"> -->\n    <div>\n      <div class=\"section full\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <ul class=\"nav nav-tabs style1\" role=\"tablist\">\n              <li class=\"nav-item\">\n                <a href=\"#buy\" class=\"nav-link active\" role=\"tab\" data-toggle=\"tab\">Buy</a>\n              </li>\n              <li class=\"nav-item\">\n                <a href=\"#sell\" class=\"nav-link\" role=\"tab\" data-toggle=\"tab\">Sell</a>\n              </li>\n            </ul>\n            <div class=\"tab-content mt-1\">\n              <buy/>\n              <sell/>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <app-bottom-menu />\n  </div>\n  <splash v-else />\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport api from '../api'\nimport AppBottomMenu from '../components/AppBottomMenu.vue'\nimport Buy from '../components/Buy.vue'\nimport Header from '../components/Header.vue'\nimport Sell from '../components/Sell.vue'\nimport Splash from './Splash.vue'\n\n\nexport default {\n  name: 'Home',\n  components: { Splash, Header, AppBottomMenu, Buy, Sell },\n  data() { return { transactions: [], strata: { balance: 0, toUsd: 0 }, polling: null } },\n  computed: mapGetters(['isLoggedIn','auth']),\n  methods: {\n    async initValues(values) {\n      if(this.isLoggedIn) {\n        if(values) {\n          this.transactions = values.transactions\n          this.strata = values.strata\n        }else {\n          const records = this.auth.records\n          this.transactions = records.logs\n          this.strata.balance = records.balance ? parseFloat(records.balance).toFixed(4) : '0.0000'\n          const toUsd = await api.convertStrataToUsd(records.balance || '0')\n          this.strata.toUsd = parseFloat(toUsd).toFixed(6)\n        }\n      }\n    },\n    fetchFrom() {\n      if(this.isLoggedIn) {\n        var values = { transactions:null, strata:{ balance:null, toUsd:null } }\n        api.getUserBalances(this.auth.info.walletAddress).then(response => {\n          if(response.status == 1) {\n            window.localStorage.setItem('user_data', JSON.stringify(response.data))\n            values.transactions = response.data.logs\n            values.strata.balance = response.data.balance ? parseFloat(response.data.balance).toFixed(4) : '0.0000'\n            return api.convertStrataToUsd(response.data.balance || '0')\n          }else return 0.0\n        }).then(toUsd => {\n          values.strata.toUsd = parseFloat(toUsd).toFixed(6)\n          this.initValues(values)\n        })\n      }\n    },\n    pollData() {\n      this.initValues()\n      this.polling = setInterval(() => {\n        if(navigator.onLine) this.fetchFrom()\n      }, 3000);\n    }\n  },\n  created() {\n    this.pollData()\n    // if(window.location.href.split(\"#/\")[1] == \"\") this.$router.replace(\"/#buy\")\n  },\n  beforeDestroy() {\n    clearInterval(this.polling)\n  }\n}\n</script>\n\n<style scoped>\n.wallet-footer{\n    border-top: none;\n    padding-top: 0px;\n}\n.balance.p-3 {\n    padding: 1rem !important;\n}\n.card {\n  background-color: none;\n}\n</style>"]}]}