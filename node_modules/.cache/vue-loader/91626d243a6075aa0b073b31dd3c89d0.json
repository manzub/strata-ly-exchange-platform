{"remainingRequest":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/components/ExchangeActionSheet.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/components/ExchangeActionSheet.vue","mtime":1622745088934},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IGFwaSBmcm9tICcuLi9hcGknCiAgZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsgcmV0dXJuIHsgZGlzYWJsZWQ6IHRydWUsIGV4Y2hhbmdlX2Ftb3VudDogMCwgYW1vdW50OiAxMCwgYWRkcmVzczogJycgfSB9LAogICAgbmFtZTogJ0V4Y2hhbmdlQWN0aW9uU2hlZXQnLAogICAgcHJvcHM6Wydzd2FwJ10sCiAgICBjb21wdXRlZDogbWFwR2V0dGVycyhbJ2F1dGgnXSksCiAgICBtZXRob2RzOiB7CiAgICAgICAgY29udmVydChldmVudCkgewogICAgICAgICAgICB2YXIgYW1vdW50ID0gZXZlbnQudGFyZ2V0LnZhbHVlOwogICAgICAgICAgICBhcGkuY29udmVydFN0cmF0YVRvVXNkKGFtb3VudCB8fCAwKQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7IHRoaXMuZXhjaGFuZ2VfYW1vdW50ID0gTnVtYmVyKHJlc3BvbnNlKSB9KQogICAgICAgIH0sCiAgICAgICAgdmFsaWRhdGUoZXZlbnQpIHsKICAgICAgICAgICAgdmFyIGFkZHJlc3MgPSBldmVudC50YXJnZXQudmFsdWU7CiAgICAgICAgICAgIGFwaS52YWxpZGF0ZUV4Y2hhZ2VBY3Rpb25BZGRyZXNzKGFkZHJlc3MsIHRoaXMuc3dhcCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICBpZihyZXNwb25zZSkgdGhpcy5kaXNhYmxlZCA9IGZhbHNlCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBwcm9jZXNzKCkgewogICAgICAgICAgICBpZighdGhpcy5kaXNhYmxlZCkgewogICAgICAgICAgICAgICAgaWYodGhpcy5hbW91bnQgIT0gMCkgewogICAgICAgICAgICAgICAgICAgIGlmKGFwaS50b3BDb2lucy5pbmNsdWRlcyh0aGlzLnN3YXApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2luSWQgPSBhcGkudG9wQ29pbnMuaW5kZXhPZih0aGlzLnN3YXApOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RybHlfZGF0YSA9IHsgc2VuZGVyOnRoaXMuYXV0aC5pbmZvLndhbGxldEFkZHJlc3MsIGFtb3VudDp0aGlzLmFtb3VudCB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7IHN0cmx5X2RhdGEsIGV4Y2hhbmdlX2Ftb3VudDogdGhpcy5leGNoYW5nZV9hbW91bnQsIGV4Y2hhbmdlX2FkZHJlc3M6IHRoaXMuYWRkcmVzcyB9CiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5jb25kdWN0RXhjaGFuZ2UoY29pbklkLCBvYmopCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlID09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzaG93IHN1Y2Nlc3MgaWYgcmVzdWx0ID09IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkb25lX2F1ZGlvID0gbmV3IEF1ZGlvKCdhc3NldHMvYXVkaW8vYXVkaW8xLm1wMycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZV9hdWRpby5wbGF5KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdHJhbnNhY3QiKS5pbm5lckhUTUwgPSBgPGlvbi1pY29uIG5hbWU9ImNoZWNrbWFyay1jaXJjbGUtb3V0bGluZSI+PC9pb24taWNvbj5gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN0cmFuc2FjdCIpLmlubmVySFRNTCA9IGBTZW5kYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN0cmFuc2FjdCIpLmlubmVySFRNTCA9IGA8aW9uLWljb24gbmFtZT0iY2xvc2UtY2lyY2xlLW91dGxpbmUiPjwvaW9uLWljb24+YAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdHJhbnNhY3QiKS5pbm5lckhUTUwgPSBgU2VuZGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgfQo="},{"version":3,"sources":["ExchangeActionSheet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ExchangeActionSheet.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"modal fade action-sheet\" id=\"exchangeActionSheet\" tabindex=\"-1\" role=\"dialog\" style=\"display: none;\" aria-hidden=\"true\">\n    <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h5 class=\"modal-title\">Exchange</h5>\n            </div>\n            <div class=\"modal-body\">\n                <div class=\"action-sheet-content\">\n                    <form>\n                        <div class=\"row\">\n                            <div class=\"col-6\">\n                                <div class=\"form-group basic\">\n                                    <div class=\"input-wrapper\">\n                                        <label class=\"label\" for=\"currency1\">From</label>\n                                        <select class=\"form-control custom-select\" id=\"currency1\">\n                                            <option value=\"1\">STRLY</option>\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"col-6\">\n                                <div class=\"form-group basic\">\n                                    <div class=\"input-wrapper\">\n                                        <label class=\"label\" for=\"currency2\">To</label>\n                                        <select class=\"form-control custom-select\" id=\"currency2\">\n                                            <option value=\"1\">{{ swap }}</option>\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class=\"form-group basic\">\n                            <label class=\"label\">Enter Amount</label>\n                            <div class=\"input-group mb-2\">\n                                <div class=\"input-group-prepend\">\n                                    <span class=\"input-group-text text-muted\" id=\"input1\">STRLY</span>\n                                </div>\n                                <input @keyup=\"convert\" type=\"number\" class=\"form-control form-control-lg\" v-model=\"amount\">\n                            </div>\n                        </div>\n\n                        <div class=\"form-group basic\">\n                            <label class=\"label\">Enter {{ swap }} Address</label>\n                            <div class=\"input-group mb-2\">\n                                <input @keyup=\"validate\" type=\"text\" class=\"form-control form-control-lg\" v-model=\"address\">\n                            </div>\n                        </div>\n\n\n\n                        <div class=\"form-group basic\">\n                            <button id=\"trade\" :disabled=\"disabled\" @click=\"process\" type=\"button\" class=\"btn btn-primary btn-block btn-lg\">Trade</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport api from '../api'\n  export default {\n    data() { return { disabled: true, exchange_amount: 0, amount: 10, address: '' } },\n    name: 'ExchangeActionSheet',\n    props:['swap'],\n    computed: mapGetters(['auth']),\n    methods: {\n        convert(event) {\n            var amount = event.target.value;\n            api.convertStrataToUsd(amount || 0)\n            .then(response => { this.exchange_amount = Number(response) })\n        },\n        validate(event) {\n            var address = event.target.value;\n            api.validateExchageActionAddress(address, this.swap).then(response => {\n                if(response) this.disabled = false\n            })\n        },\n        process() {\n            if(!this.disabled) {\n                if(this.amount != 0) {\n                    if(api.topCoins.includes(this.swap)) {\n                        let coinId = api.topCoins.indexOf(this.swap);\n                        let strly_data = { sender:this.auth.info.walletAddress, amount:this.amount }\n                        var obj = { strly_data, exchange_amount: this.exchange_amount, exchange_address: this.address }\n                        api.conductExchange(coinId, obj)\n                        .then(response => {\n                            if(response == 1) {\n                                // show success if result == 1;\n                                console.log(response);\n                                var done_audio = new Audio('assets/audio/audio1.mp3')\n                                done_audio.play()\n                                document.querySelector(\"#transact\").innerHTML = `<ion-icon name=\"checkmark-circle-outline\"></ion-icon>`\n                                this.disabled = true\n                                setTimeout(() => {\n                                    this.disabled = false\n                                    document.querySelector(\"#transact\").innerHTML = `Send`\n                                }, 2000);\n                            }else {\n                                document.querySelector(\"#transact\").innerHTML = `<ion-icon name=\"close-circle-outline\"></ion-icon>`\n                                this.disabled = true\n                                setTimeout(() => {\n                                    this.disabled = false\n                                    document.querySelector(\"#transact\").innerHTML = `Send`\n                                }, 1000);\n                            }\n                        })\n                    }\n                }\n            }\n        }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>"]}]}