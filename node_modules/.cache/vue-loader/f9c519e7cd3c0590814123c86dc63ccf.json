{"remainingRequest":"/Users/mac/Sites/VUE/exchangeapp-version-control/v2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Sites/VUE/exchangeapp-version-control/v2/src/components/ExchangeActionSheet.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v2/src/components/ExchangeActionSheet.vue","mtime":1624655905119},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IGFwaSBmcm9tICcuLi9hcGknCiAgZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsgcmV0dXJuIHsgY29pbnM6W10sIGRpc2FibGVkOiB0cnVlLCBleGNoYW5nZV9hbW91bnQ6IDAsIGFtb3VudDogMCwgZXhjaGFuZ2VfdG86ICdzdHJhdGFseScsIGV4Y2hhbmdlX2Zyb206ICdidGMnLCB0b1VzZDowIH0gfSwKICAgIG5hbWU6ICdFeGNoYW5nZUFjdGlvblNoZWV0JywKICAgIHByb3BzOlsnc3dhcCddLAogICAgY29tcHV0ZWQ6IG1hcEdldHRlcnMoWydhdXRoJ10pLAogICAgbWV0aG9kczogewogICAgICAgIG1heCgpIHsgdGhpcy5hbW91bnQgPSB0aGlzLnN3YXAuYmFsYW5jZSAtICh0aGlzLnN3YXAuYmFsYW5jZSAqIDAuMDAyKTt0aGlzLmNvbnZlcnQoKSB9LAogICAgICAgIGNvbnZlcnQoKSB7CiAgICAgICAgICAgIHZhciB0b1VzZCA9IHRoaXMuYW1vdW50KnRoaXMuc3dhcC52YWx1ZTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2codG9Vc2QpOwogICAgICAgICAgICB0aGlzLnRvVXNkID0gdG9Vc2QKICAgICAgICAgICAgc3dpdGNoICh0aGlzLmV4Y2hhbmdlX3RvKSB7CiAgICAgICAgICAgICAgICBjYXNlICdzdHJhdGFseSc6CiAgICAgICAgICAgICAgICAgICAgYXBpLmNvbnZlcnRVc2RUb1N0cmF0YSh0b1VzZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhjaGFuZ2VfYW1vdW50ID0gcmVzcG9uc2UKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnYnRjJzoKICAgICAgICAgICAgICAgICAgICBpZihgJHt0aGlzLmFtb3VudH1gLnNwbGl0KCcuJylbMF0ubGVuZ3RoID49IDcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ0Y192YWx1ZSA9IHRoaXMuY29pbnMuZmluZChjb2luID0+IGNvaW4ubmFtZSA9PSAnQlRDJykudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSB0b1VzZC9OdW1iZXIoYnRjX3ZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4Y2hhbmdlX2Ftb3VudCA9IHBhcnNlSW50KHRvVXNkKS50b0ZpeGVkKDApCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzZWxlY3RlZChldmVudCkgeyAKICAgICAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICB2YXIgc3RyID0gZXZlbnQudGFyZ2V0LnZhbHVlID09ICdTVFJMWScgPyAnc3RyYXRhbHknIDogZXZlbnQudGFyZ2V0LnZhbHVlOwogICAgICAgICAgICB2YXIgc3RyMiA9IGV2ZW50LnRhcmdldC52YWx1ZSA9PSAnU1RSTFknID8gJ2J0YycgOiAnc3RyYXRhbHknOwogICAgICAgICAgICB0aGlzLmV4Y2hhbmdlX2Zyb20gPSBzdHIyLnRvTG93ZXJDYXNlKCkKICAgICAgICAgICAgdGhpcy5leGNoYW5nZV90byA9IHN0ci50b0xvd2VyQ2FzZSgpCiAgICAgICAgfSwKICAgICAgICBwcm9jZXNzKCkgewogICAgICAgICAgICB0aGlzLmNvbnZlcnQoKQogICAgICAgICAgICB2YXIgZnJvbV9hbW91bnQgPSB0aGlzLmV4Y2hhbmdlX2Zyb20gPT0gJ3N0cmF0YWx5JyA/IHRoaXMuYW1vdW50IDogdGhpcy50b1VzZDsKICAgICAgICAgICAgYXBpLnN3YXBDb2lucyh0aGlzLmF1dGguaW5mbywgdGhpcy5leGNoYW5nZV9mcm9tLCB0aGlzLmV4Y2hhbmdlX3RvLCBmcm9tX2Ftb3VudCwgdGhpcy5leGNoYW5nZV9hbW91bnQpCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsgCiAgICAgICAgICAgICAgICB2YXIgeyBzdGF0dXMgfSA9IHJlc3BvbnNlOwogICAgICAgICAgICAgICAgaWYoc3RhdHVzID09ICdzaWduZWQnIHx8IHN0YXR1cyA9PSAncGVuZGluZycpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZG9uZV9hdWRpbyA9IG5ldyBBdWRpbygnYXNzZXRzL2F1ZGlvL2F1ZGlvMS5tcDMnKQogICAgICAgICAgICAgICAgICAgIGRvbmVfYXVkaW8ucGxheSgpCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3RyYWRlIikuaW5uZXJIVE1MID0gYDxpb24taWNvbiBuYW1lPSJjaGVja21hcmstY2lyY2xlLW91dGxpbmUiPjwvaW9uLWljb24+YAogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdHJhZGUiKS5pbm5lckhUTUwgPSBgRG9uZWAKICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICBhcGkuZmV0Y2hBbGxDb2lucygpLnRoZW4ocmVzcG9uc2U9Pnt0aGlzLmNvaW5zID0gcmVzcG9uc2V9KQogICAgfQogIH0K"},{"version":3,"sources":["ExchangeActionSheet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ExchangeActionSheet.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"modal fade action-sheet\" id=\"exchangeActionSheet\" tabindex=\"-1\" role=\"dialog\" style=\"display: none;\" aria-hidden=\"true\">\n    <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h5 class=\"modal-title\">Swap</h5>\n            </div>\n            <div class=\"modal-body\">\n                <div class=\"action-sheet-content\">\n                    <form>\n                        <div class=\"row\">\n                            <div class=\"col-6\">\n                                <div class=\"form-group basic\">\n                                    <div class=\"input-wrapper\">\n                                        <label class=\"label\" for=\"currency1\">From</label>\n                                        <select class=\"form-control custom-select\" id=\"currency1\">\n                                            <option value=\"1\">{{ swap.name }}</option>\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"col-6\">\n                                <div class=\"form-group basic\">\n                                    <div class=\"input-wrapper\">\n                                        <label class=\"label\" for=\"currency2\">To</label>\n                                        <select @change=\"selected\" class=\"form-control custom-select\" id=\"currency2\">\n                                            <option>Select a coin</option>\n                                            <option v-for=\"(coin, index) in coins\" :key=\"index\" :value=\"coin.name\">{{coin.name}}</option>\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"form-group-basic\">\n                            <label class=\"label\">Balance:</label>\n                            <strong>{{swap.balance}}</strong>\n                        </div>\n                        <div class=\"form-group basic\">\n                            <label class=\"label\">Enter Amount</label>\n                            <div class=\"input-group mb-0\">\n                                <div class=\"input-group-prepend\">\n                                    <span class=\"input-group-text text-muted\" id=\"input1\">{{swap.name}}</span>\n                                </div>\n                                <input @keyup=\"convert\" type=\"number\" class=\"form-control form-control-lg\" v-model=\"amount\">\n                                <div class=\"input-group-addon\">\n                                    <span @click=\"max\" class=\"btn btn-primary\">MAX</span>\n                                </div>\n                            </div>\n                            <small v-if=\"swap.name == 'STRLY'\">Minimum 1,000,000 STRLY</small>\n                        </div>\n\n                        <div class=\"form-group basic\">\n                            <button id=\"trade\" :disabled=\"disabled\" @click=\"process\" type=\"button\" class=\"btn btn-primary btn-block btn-lg\">Swap</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport api from '../api'\n  export default {\n    data() { return { coins:[], disabled: true, exchange_amount: 0, amount: 0, exchange_to: 'strataly', exchange_from: 'btc', toUsd:0 } },\n    name: 'ExchangeActionSheet',\n    props:['swap'],\n    computed: mapGetters(['auth']),\n    methods: {\n        max() { this.amount = this.swap.balance - (this.swap.balance * 0.002);this.convert() },\n        convert() {\n            var toUsd = this.amount*this.swap.value;\n            // console.log(toUsd);\n            this.toUsd = toUsd\n            switch (this.exchange_to) {\n                case 'strataly':\n                    api.convertUsdToStrata(toUsd).then(response => {\n                        this.exchange_amount = response\n                    })\n                    break;\n                case 'btc':\n                    if(`${this.amount}`.split('.')[0].length >= 7) {\n                        var btc_value = this.coins.find(coin => coin.name == 'BTC').value;\n                        var str = toUsd/Number(btc_value)\n                        this.exchange_amount = parseInt(toUsd).toFixed(0)\n                    }\n                    break;\n            }\n        },\n        selected(event) { \n            this.disabled = false;\n            var str = event.target.value == 'STRLY' ? 'strataly' : event.target.value;\n            var str2 = event.target.value == 'STRLY' ? 'btc' : 'strataly';\n            this.exchange_from = str2.toLowerCase()\n            this.exchange_to = str.toLowerCase()\n        },\n        process() {\n            this.convert()\n            var from_amount = this.exchange_from == 'strataly' ? this.amount : this.toUsd;\n            api.swapCoins(this.auth.info, this.exchange_from, this.exchange_to, from_amount, this.exchange_amount)\n            .then(response => { \n                var { status } = response;\n                if(status == 'signed' || status == 'pending') {\n                    var done_audio = new Audio('assets/audio/audio1.mp3')\n                    done_audio.play()\n                    document.querySelector(\"#trade\").innerHTML = `<ion-icon name=\"checkmark-circle-outline\"></ion-icon>`\n                    setTimeout(() => {\n                        document.querySelector(\"#trade\").innerHTML = `Done`\n                    }, 1000);\n                }\n            })\n        }\n    },\n    created() {\n        api.fetchAllCoins().then(response=>{this.coins = response})\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>"]}]}