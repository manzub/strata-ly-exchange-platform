{"remainingRequest":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/components/TransferActionSheet.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/components/TransferActionSheet.vue","mtime":1621073321391},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwppbXBvcnQgYXBpIGZyb20gJy4uL2FwaScKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd0cmFuc2ZlckFjdGlvblNoZWV0JywKICBkYXRhKCkgeyByZXR1cm4geyBnYXNfZmVlOiAwLCBpbnZfYWRkOmZhbHNlLCBidXR0b25EaXNhYmxlZDp0cnVlLCByZWNpcGllbnQ6JycsIGFtb3VudDowIH0gfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbJ2F1dGgnXSksCiAgICBhZGRyZXNzX2VuZCgpIHsgcmV0dXJuIHRoaXMuYXV0aC5pbmZvLndhbGxldEFkZHJlc3Muc3Vic3RyKDAsNSkgfQogIH0sCiAgbWV0aG9kczogewogICAgaXNEaXNhYmxlZCgpIHsgKHRoaXMuZ2FzX2ZlZSAhPSAwICYmIHRoaXMuaW52X2FkZD09ZmFsc2UpID8gdGhpcy5idXR0b25EaXNhYmxlZCA9IGZhbHNlIDogdGhpcy5idXR0b25EaXNhYmxlZCA9IHRydWUgfSwKICAgIHZhbGlkYXRlQWRkcmVzcyhldmVudCkgewogICAgICB0aGlzLmludl9hZGQgPSB0cnVlCiAgICAgIGlmKGV2ZW50LnRhcmdldC52YWx1ZSAhPSAnJyAmJiBldmVudC50YXJnZXQudmFsdWUgIT0gdGhpcy5hdXRoLmluZm8ud2FsbGV0QWRkcmVzcykgewogICAgICAgIGlmKGV2ZW50LnRhcmdldC52YWx1ZS5sZW5ndGggPj0gNTApIHsKICAgICAgICAgIG5hdmlnYXRvci5vbkxpbmUgJiYgYXBpLmdldFdhbGxldChldmVudC50YXJnZXQudmFsdWUpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgIGlmKHJlc3BvbnNlLmFkZHJlc3MpIHRoaXMuaW52X2FkZCA9IGZhbHNlCiAgICAgICAgICAgIHRoaXMucmVjaXBpZW50ID0gcmVzcG9uc2UuYWRkcmVzcwogICAgICAgICAgICB0aGlzLmlzRGlzYWJsZWQoKQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjYWxjRmVlcyhldmVudCkgewogICAgICB0aGlzLmdhc19mZWUgPSAwCiAgICAgIHRoaXMuaXNEaXNhYmxlZCgpCiAgICAgIGlmKGV2ZW50LnRhcmdldC52YWx1ZSAhPSAwKSB7CiAgICAgICAgbmF2aWdhdG9yLm9uTGluZSAmJiBhcGkuZ2V0R2FzRmVlKGV2ZW50LnRhcmdldC52YWx1ZSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLmdhc19mZWUgPSBwYXJzZUZsb2F0KHJlc3BvbnNlKS50b0ZpeGVkKDgpCiAgICAgICAgICB0aGlzLmFtb3VudCA9IGV2ZW50LnRhcmdldC52YWx1ZQogICAgICAgICAgdGhpcy5pc0Rpc2FibGVkKCkKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgcHJvY2Nlc3NUcmFuc2FjdCgpIHsKICAgICAgaWYoIXRoaXMuYnV0dG9uRGlzYWJsZWQpIHsKICAgICAgICBjb25zdCB7IHJlY2lwaWVudCwgYW1vdW50IH0gPSB0aGlzCiAgICAgICAgbmF2aWdhdG9yLm9uTGluZSAmJiBhcGkuc2VuZFRyYW5zYWN0aW9uKHsgc2VuZGVyOnRoaXMuYXV0aC5pbmZvLndhbGxldEFkZHJlc3MsIHJlY2lwaWVudCwgYW1vdW50Ok51bWJlcihhbW91bnQpIH0pCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgaWYocmVzcG9uc2Uuc3RhdHVzID09IDEpIHsKICAgICAgICAgICAgdmFyIGRvbmVfYXVkaW8gPSBuZXcgQXVkaW8oJ2Fzc2V0cy9hdWRpby9hdWRpbzEubXAzJykKICAgICAgICAgICAgZG9uZV9hdWRpby5wbGF5KCkKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3RyYW5zYWN0IikuaW5uZXJIVE1MID0gYDxpb24taWNvbiBuYW1lPSJjaGVja21hcmstY2lyY2xlLW91dGxpbmUiPjwvaW9uLWljb24+YAogICAgICAgICAgICB0aGlzLmJ1dHRvbkRpc2FibGVkID0gdHJ1ZQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLmJ1dHRvbkRpc2FibGVkID0gZmFsc2UKICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdHJhbnNhY3QiKS5pbm5lckhUTUwgPSBgU2VuZGAKICAgICAgICAgICAgfSwgMjAwMCk7CiAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiN0cmFuc2FjdCIpLmlubmVySFRNTCA9IGA8aW9uLWljb24gbmFtZT0iY2xvc2UtY2lyY2xlLW91dGxpbmUiPjwvaW9uLWljb24+YAogICAgICAgICAgICB0aGlzLmJ1dHRvbkRpc2FibGVkID0gdHJ1ZQogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLmJ1dHRvbkRpc2FibGVkID0gZmFsc2UKICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdHJhbnNhY3QiKS5pbm5lckhUTUwgPSBgU2VuZGAKICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["TransferActionSheet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TransferActionSheet.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"transferActionSheet\">\n    <div class=\"modal fade action-sheet\" id=\"sendActionSheet\" tabindex=\"-1\" role=\"dialog\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">Send Money</h5>\n          </div>\n          <div class=\"modal-body\">\n            <div class=\"action-sheet-content\">\n              <form>\n                <div class=\"form-group basic\">\n                  <div class=\"input-wrapper\">\n                    <label class=\"label\" for=\"account2\">From</label>\n                    <select disabled class=\"form-control custom-select\" id=\"account2d\">\n                      <option value=\"0\">STRATALY (*** {{ address_end }})</option>\n                    </select>\n                  </div>\n                </div>\n\n                <div class=\"form-group basic\">\n                  <div class=\"input-wrapper\">\n                    <label class=\"label\" for=\"text11\">To</label>\n                    <input @keyup=\"validateAddress\" type=\"text\" class=\"form-control\" id=\"text11\" placeholder=\"Enter Wallet Address\">\n                    <small v-if=\"inv_add\" class=\"text-danger\" >Invalid Wallet Address</small>\n                    <i class=\"clear-input\">\n                      <ion-icon name=\"close-circle\"></ion-icon>\n                    </i>\n                  </div>\n                </div>\n\n                <div class=\"form-group basic\">\n                  <label class=\"label\">Enter Amount</label>\n                  <div class=\"input-group mb-2\">\n                    <div class=\"input-group-prepend\">\n                      <span class=\"input-group-text\" id=\"input14\">STRLY</span>\n                    </div>\n                    <input @keyup=\"calcFees\" type=\"text\" class=\"form-control form-control-lg\" placeholder=\"0\">\n                  </div>\n                </div>\n                <p>Gas Fee: <strong class=\"text-info\" >{{ gas_fee }}</strong></p>\n                <div class=\"form-group basic\">\n                  <button :disabled=\"buttonDisabled\" type=\"button\" class=\"btn btn-primary btn-block btn-lg\"\n                  @click=\"proccessTransact\"  id=\"transact\">Send</button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport api from '../api'\nexport default {\n  name: 'transferActionSheet',\n  data() { return { gas_fee: 0, inv_add:false, buttonDisabled:true, recipient:'', amount:0 } },\n  computed: {\n    ...mapGetters(['auth']),\n    address_end() { return this.auth.info.walletAddress.substr(0,5) }\n  },\n  methods: {\n    isDisabled() { (this.gas_fee != 0 && this.inv_add==false) ? this.buttonDisabled = false : this.buttonDisabled = true },\n    validateAddress(event) {\n      this.inv_add = true\n      if(event.target.value != '' && event.target.value != this.auth.info.walletAddress) {\n        if(event.target.value.length >= 50) {\n          navigator.onLine && api.getWallet(event.target.value).then((response) => {\n            if(response.address) this.inv_add = false\n            this.recipient = response.address\n            this.isDisabled()\n          })\n        }\n      }\n    },\n    calcFees(event) {\n      this.gas_fee = 0\n      this.isDisabled()\n      if(event.target.value != 0) {\n        navigator.onLine && api.getGasFee(event.target.value).then(response => {\n          this.gas_fee = parseFloat(response).toFixed(8)\n          this.amount = event.target.value\n          this.isDisabled()\n        })\n      }\n    },\n    proccessTransact() {\n      if(!this.buttonDisabled) {\n        const { recipient, amount } = this\n        navigator.onLine && api.sendTransaction({ sender:this.auth.info.walletAddress, recipient, amount:Number(amount) })\n        .then(response => {\n          if(response.status == 1) {\n            var done_audio = new Audio('assets/audio/audio1.mp3')\n            done_audio.play()\n            document.querySelector(\"#transact\").innerHTML = `<ion-icon name=\"checkmark-circle-outline\"></ion-icon>`\n            this.buttonDisabled = true\n            setTimeout(() => {\n              this.buttonDisabled = false\n              document.querySelector(\"#transact\").innerHTML = `Send`\n            }, 2000);\n          }else {\n            document.querySelector(\"#transact\").innerHTML = `<ion-icon name=\"close-circle-outline\"></ion-icon>`\n            this.buttonDisabled = true\n            setTimeout(() => {\n              this.buttonDisabled = false\n              document.querySelector(\"#transact\").innerHTML = `Send`\n            }, 1000);\n          }\n        })\n      }\n    }\n  }\n}\n</script>"]}]}