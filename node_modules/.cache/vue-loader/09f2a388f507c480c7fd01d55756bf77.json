{"remainingRequest":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/views/Home.vue","mtime":1621869843465},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwppbXBvcnQgYXBpIGZyb20gJy4uL2FwaScKaW1wb3J0IEFwcEJvdHRvbU1lbnUgZnJvbSAnLi4vY29tcG9uZW50cy9BcHBCb3R0b21NZW51LnZ1ZScKaW1wb3J0IEJ1eSBmcm9tICcuLi9jb21wb25lbnRzL0J1eS52dWUnCmltcG9ydCBIZWFkZXIgZnJvbSAnLi4vY29tcG9uZW50cy9IZWFkZXIudnVlJwppbXBvcnQgU2VsbCBmcm9tICcuLi9jb21wb25lbnRzL1NlbGwudnVlJwppbXBvcnQgU3BsYXNoIGZyb20gJy4vU3BsYXNoLnZ1ZScKCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0hvbWUnLAogIGNvbXBvbmVudHM6IHsgU3BsYXNoLCBIZWFkZXIsIEFwcEJvdHRvbU1lbnUsIEJ1eSwgU2VsbCB9LAogIGRhdGEoKSB7IHJldHVybiB7IHZhbHVlOiAwLjAwMCwgdHJhbnNhY3Rpb25zOiBbXSwgc3RyYXRhOiB7IGJhbGFuY2U6IDAsIHRvVXNkOiAwIH0sIHBvbGxpbmc6IG51bGwgfSB9LAogIGNvbXB1dGVkOiBtYXBHZXR0ZXJzKFsnaXNMb2dnZWRJbicsJ2F1dGgnXSksCiAgbWV0aG9kczogewogICAgYXN5bmMgaW5pdFZhbHVlcyh2YWx1ZXMpIHsKICAgICAgaWYodGhpcy5pc0xvZ2dlZEluKSB7CiAgICAgICAgaWYodmFsdWVzKSB7CiAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9ucyA9IHZhbHVlcy50cmFuc2FjdGlvbnMKICAgICAgICAgIHRoaXMuc3RyYXRhID0gdmFsdWVzLnN0cmF0YQogICAgICAgIH1lbHNlIHsKICAgICAgICAgIGNvbnN0IHJlY29yZHMgPSB0aGlzLmF1dGgucmVjb3JkcwogICAgICAgICAgdGhpcy50cmFuc2FjdGlvbnMgPSByZWNvcmRzLmxvZ3MKICAgICAgICAgIHRoaXMuc3RyYXRhLmJhbGFuY2UgPSByZWNvcmRzLmJhbGFuY2UgPyBwYXJzZUZsb2F0KHJlY29yZHMuYmFsYW5jZSkudG9GaXhlZCg0KSA6ICcwLjAwMDAnCiAgICAgICAgICBjb25zdCB0b1VzZCA9IGF3YWl0IGFwaS5jb252ZXJ0U3RyYXRhVG9Vc2QocmVjb3Jkcy5iYWxhbmNlIHx8ICcwJykKICAgICAgICAgIHRoaXMuc3RyYXRhLnRvVXNkID0gcGFyc2VGbG9hdCh0b1VzZCkudG9GaXhlZCg2KQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGZldGNoRnJvbSgpIHsKICAgICAgaWYodGhpcy5pc0xvZ2dlZEluKSB7CiAgICAgICAgdmFyIHZhbHVlcyA9IHsgdHJhbnNhY3Rpb25zOm51bGwsIHN0cmF0YTp7IGJhbGFuY2U6bnVsbCwgdG9Vc2Q6bnVsbCB9IH0KICAgICAgICBhcGkuZ2V0VXNlckJhbGFuY2VzKHRoaXMuYXV0aC5pbmZvLndhbGxldEFkZHJlc3MpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgaWYocmVzcG9uc2Uuc3RhdHVzID09IDEpIHsKICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyX2RhdGEnLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhKSkKICAgICAgICAgICAgdmFsdWVzLnRyYW5zYWN0aW9ucyA9IHJlc3BvbnNlLmRhdGEubG9ncwogICAgICAgICAgICB2YWx1ZXMuc3RyYXRhLmJhbGFuY2UgPSByZXNwb25zZS5kYXRhLmJhbGFuY2UgPyBwYXJzZUZsb2F0KHJlc3BvbnNlLmRhdGEuYmFsYW5jZSkudG9GaXhlZCg0KSA6ICcwLjAwMDAnCiAgICAgICAgICAgIHJldHVybiBhcGkuY29udmVydFN0cmF0YVRvVXNkKHJlc3BvbnNlLmRhdGEuYmFsYW5jZSB8fCAnMCcpCiAgICAgICAgICB9ZWxzZSByZXR1cm4gMC4wCiAgICAgICAgfSkudGhlbih0b1VzZCA9PiB7CiAgICAgICAgICB2YWx1ZXMuc3RyYXRhLnRvVXNkID0gcGFyc2VGbG9hdCh0b1VzZCkudG9GaXhlZCg2KQogICAgICAgICAgdGhpcy5pbml0VmFsdWVzKHZhbHVlcykKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgcG9sbERhdGEoKSB7CiAgICAgIHRoaXMuaW5pdFZhbHVlcygpCiAgICAgIHRoaXMucG9sbGluZyA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICBpZihuYXZpZ2F0b3Iub25MaW5lKSB0aGlzLmZldGNoRnJvbSgpCiAgICAgIH0sIDMwMDApOwogICAgfSwKICAgIGNoYW5nZVJhdGVzKGFjdGl2aXR5KSB7CiAgICAgIGlmKGFjdGl2aXR5ID09ICdzZWxsJykgYXBpLmdldEdhc0ZlZSgxKS50aGVuKHJlc3BvbnNlPT50aGlzLnZhbHVlKz1yZXNwb25zZSkKICAgICAgZWxzZSB0aGlzLmdldFJhdGVzKCkKICAgIH0sCiAgICBnZXRSYXRlcygpIHsKICAgICAgYXBpLmdldFJhdGVzKCkudGhlbihyZXNwb25zZT0+dGhpcy52YWx1ZSA9IHJlc3BvbnNlLmN1cnJlbnRfdmFsdWUpCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5wb2xsRGF0YSgpCiAgICB0aGlzLmdldFJhdGVzKCkKICAgIC8vIGlmKHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCIjLyIpWzFdID09ICIiKSB0aGlzLiRyb3V0ZXIucmVwbGFjZSgiLyNidXkiKQogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wb2xsaW5nKQogIH0KfQo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div v-if=\"isLoggedIn\" class=\"home\">\n    <!-- <Header /> -->\n    <!-- <div id=\"appCapsule\"> -->\n    <div class=\"section full bg-primary\">\n      <div class=\"card\">\n        <div class=\"card-body\">\n          <ul class=\"nav nav-tabs style1\" role=\"tablist\">\n            <li class=\"nav-item\" @click=\"changeRates('buy')\">\n              <a href=\"#buy\" class=\"nav-link active\" role=\"tab\" data-toggle=\"tab\">Buy</a>\n            </li>\n            <li @click=\"changeRates('sell')\" class=\"nav-item\">\n              <a href=\"#sell\" class=\"nav-link\" role=\"tab\" data-toggle=\"tab\">Sell</a>\n            </li>\n          </ul>\n          <div class=\"section full\">\n            <div class=\"container text-center mt-4\">\n              <img src=\"assets/img/logo-icon.png\" style=\"width:30%\" alt=\"\">\n              <h1 class=\"text-white pt-1 mb-0\">STRLY</h1>\n            </div>\n            <div class=\"transactions\">\n              <a class=\"item\">\n                <div class=\"detail\">\n                  <div>\n                    <p>\n                      <b style=\"font-size:12px;color:#b5b4b4\">Rate: </b>\n                      <b style=\"font-weight:900;color:#444\">1 STRLY</b> -> \n                      <em class=\"text-success\">${{ value }}</em></p>\n                  </div>\n                </div>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"tab-content mt-1\">\n      <buy/>\n      <sell/>\n    </div>\n    <app-bottom-menu />\n  </div>\n  <splash v-else />\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport api from '../api'\nimport AppBottomMenu from '../components/AppBottomMenu.vue'\nimport Buy from '../components/Buy.vue'\nimport Header from '../components/Header.vue'\nimport Sell from '../components/Sell.vue'\nimport Splash from './Splash.vue'\n\n\nexport default {\n  name: 'Home',\n  components: { Splash, Header, AppBottomMenu, Buy, Sell },\n  data() { return { value: 0.000, transactions: [], strata: { balance: 0, toUsd: 0 }, polling: null } },\n  computed: mapGetters(['isLoggedIn','auth']),\n  methods: {\n    async initValues(values) {\n      if(this.isLoggedIn) {\n        if(values) {\n          this.transactions = values.transactions\n          this.strata = values.strata\n        }else {\n          const records = this.auth.records\n          this.transactions = records.logs\n          this.strata.balance = records.balance ? parseFloat(records.balance).toFixed(4) : '0.0000'\n          const toUsd = await api.convertStrataToUsd(records.balance || '0')\n          this.strata.toUsd = parseFloat(toUsd).toFixed(6)\n        }\n      }\n    },\n    fetchFrom() {\n      if(this.isLoggedIn) {\n        var values = { transactions:null, strata:{ balance:null, toUsd:null } }\n        api.getUserBalances(this.auth.info.walletAddress).then(response => {\n          if(response.status == 1) {\n            window.localStorage.setItem('user_data', JSON.stringify(response.data))\n            values.transactions = response.data.logs\n            values.strata.balance = response.data.balance ? parseFloat(response.data.balance).toFixed(4) : '0.0000'\n            return api.convertStrataToUsd(response.data.balance || '0')\n          }else return 0.0\n        }).then(toUsd => {\n          values.strata.toUsd = parseFloat(toUsd).toFixed(6)\n          this.initValues(values)\n        })\n      }\n    },\n    pollData() {\n      this.initValues()\n      this.polling = setInterval(() => {\n        if(navigator.onLine) this.fetchFrom()\n      }, 3000);\n    },\n    changeRates(activity) {\n      if(activity == 'sell') api.getGasFee(1).then(response=>this.value+=response)\n      else this.getRates()\n    },\n    getRates() {\n      api.getRates().then(response=>this.value = response.current_value)\n    }\n  },\n  created() {\n    this.pollData()\n    this.getRates()\n    // if(window.location.href.split(\"#/\")[1] == \"\") this.$router.replace(\"/#buy\")\n  },\n  beforeDestroy() {\n    clearInterval(this.polling)\n  }\n}\n</script>\n\n<style scoped>\n.wallet-footer{\n    border-top: none;\n    padding-top: 0px;\n}\n.balance.p-3 {\n    padding: 1rem !important;\n}\n.card {\n  box-shadow: none;\n  background: none;\n  background-color: none;\n}\n.nav-tabs.style1 .nav-item .nav-link {\n  color: white;\n}\n.nav-tabs.style1 .nav-item .nav-link.active {\n  color: #27173E;\n}\n</style>"]}]}