{"remainingRequest":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/views/Home.vue","mtime":1621627681588},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwppbXBvcnQgYXBpIGZyb20gJy4uL2FwaScKaW1wb3J0IEFwcEJvdHRvbU1lbnUgZnJvbSAnLi4vY29tcG9uZW50cy9BcHBCb3R0b21NZW51LnZ1ZScKaW1wb3J0IEJ1eSBmcm9tICcuLi9jb21wb25lbnRzL0J1eS52dWUnCmltcG9ydCBIZWFkZXIgZnJvbSAnLi4vY29tcG9uZW50cy9IZWFkZXIudnVlJwppbXBvcnQgU2VsbCBmcm9tICcuLi9jb21wb25lbnRzL1NlbGwudnVlJwppbXBvcnQgU3BsYXNoIGZyb20gJy4vU3BsYXNoLnZ1ZScKCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0hvbWUnLAogIGNvbXBvbmVudHM6IHsgU3BsYXNoLCBIZWFkZXIsIEFwcEJvdHRvbU1lbnUsIEJ1eSwgU2VsbCB9LAogIGRhdGEoKSB7IHJldHVybiB7IHRyYW5zYWN0aW9uczogW10sIHN0cmF0YTogeyBiYWxhbmNlOiAwLCB0b1VzZDogMCB9LCBwb2xsaW5nOiBudWxsIH0gfSwKICBjb21wdXRlZDogbWFwR2V0dGVycyhbJ2lzTG9nZ2VkSW4nLCdhdXRoJ10pLAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGluaXRWYWx1ZXModmFsdWVzKSB7CiAgICAgIGlmKHRoaXMuaXNMb2dnZWRJbikgewogICAgICAgIGlmKHZhbHVlcykgewogICAgICAgICAgdGhpcy50cmFuc2FjdGlvbnMgPSB2YWx1ZXMudHJhbnNhY3Rpb25zCiAgICAgICAgICB0aGlzLnN0cmF0YSA9IHZhbHVlcy5zdHJhdGEKICAgICAgICB9ZWxzZSB7CiAgICAgICAgICBjb25zdCByZWNvcmRzID0gdGhpcy5hdXRoLnJlY29yZHMKICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25zID0gcmVjb3Jkcy5sb2dzCiAgICAgICAgICB0aGlzLnN0cmF0YS5iYWxhbmNlID0gcmVjb3Jkcy5iYWxhbmNlID8gcGFyc2VGbG9hdChyZWNvcmRzLmJhbGFuY2UpLnRvRml4ZWQoNCkgOiAnMC4wMDAwJwogICAgICAgICAgY29uc3QgdG9Vc2QgPSBhd2FpdCBhcGkuY29udmVydFN0cmF0YVRvVXNkKHJlY29yZHMuYmFsYW5jZSB8fCAnMCcpCiAgICAgICAgICB0aGlzLnN0cmF0YS50b1VzZCA9IHBhcnNlRmxvYXQodG9Vc2QpLnRvRml4ZWQoNikKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBmZXRjaEZyb20oKSB7CiAgICAgIGlmKHRoaXMuaXNMb2dnZWRJbikgewogICAgICAgIHZhciB2YWx1ZXMgPSB7IHRyYW5zYWN0aW9uczpudWxsLCBzdHJhdGE6eyBiYWxhbmNlOm51bGwsIHRvVXNkOm51bGwgfSB9CiAgICAgICAgYXBpLmdldFVzZXJCYWxhbmNlcyh0aGlzLmF1dGguaW5mby53YWxsZXRBZGRyZXNzKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGlmKHJlc3BvbnNlLnN0YXR1cyA9PSAxKSB7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcl9kYXRhJywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YSkpCiAgICAgICAgICAgIHZhbHVlcy50cmFuc2FjdGlvbnMgPSByZXNwb25zZS5kYXRhLmxvZ3MKICAgICAgICAgICAgdmFsdWVzLnN0cmF0YS5iYWxhbmNlID0gcmVzcG9uc2UuZGF0YS5iYWxhbmNlID8gcGFyc2VGbG9hdChyZXNwb25zZS5kYXRhLmJhbGFuY2UpLnRvRml4ZWQoNCkgOiAnMC4wMDAwJwogICAgICAgICAgICByZXR1cm4gYXBpLmNvbnZlcnRTdHJhdGFUb1VzZChyZXNwb25zZS5kYXRhLmJhbGFuY2UgfHwgJzAnKQogICAgICAgICAgfWVsc2UgcmV0dXJuIDAuMAogICAgICAgIH0pLnRoZW4odG9Vc2QgPT4gewogICAgICAgICAgdmFsdWVzLnN0cmF0YS50b1VzZCA9IHBhcnNlRmxvYXQodG9Vc2QpLnRvRml4ZWQoNikKICAgICAgICAgIHRoaXMuaW5pdFZhbHVlcyh2YWx1ZXMpCiAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIHBvbGxEYXRhKCkgewogICAgICB0aGlzLmluaXRWYWx1ZXMoKQogICAgICB0aGlzLnBvbGxpbmcgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgaWYobmF2aWdhdG9yLm9uTGluZSkgdGhpcy5mZXRjaEZyb20oKQogICAgICB9LCAzMDAwKTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnBvbGxEYXRhKCkKICAgIC8vIGlmKHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCIjLyIpWzFdID09ICIiKSB0aGlzLiRyb3V0ZXIucmVwbGFjZSgiLyNidXkiKQogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wb2xsaW5nKQogIH0KfQo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div v-if=\"isLoggedIn\" class=\"home\">\n    <!-- <Header /> -->\n    <!-- <div id=\"appCapsule\"> -->\n    <div>\n      <div class=\"section full\">\n        <div class=\"card\">\n          <div class=\"card-body\">\n            <ul class=\"nav nav-tabs style1\" role=\"tablist\">\n              <li class=\"nav-item\">\n                <a href=\"#buy\" class=\"nav-link active\" role=\"tab\" data-toggle=\"tab\">Buy</a>\n              </li>\n              <li class=\"nav-item\">\n                <a href=\"#sell\" class=\"nav-link\" role=\"tab\" data-toggle=\"tab\">Sell</a>\n              </li>\n            </ul>\n            <div class=\"tab-content mt-1\">\n              <buy/>\n              <sell/>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <app-bottom-menu />\n  </div>\n  <splash v-else />\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport api from '../api'\nimport AppBottomMenu from '../components/AppBottomMenu.vue'\nimport Buy from '../components/Buy.vue'\nimport Header from '../components/Header.vue'\nimport Sell from '../components/Sell.vue'\nimport Splash from './Splash.vue'\n\n\nexport default {\n  name: 'Home',\n  components: { Splash, Header, AppBottomMenu, Buy, Sell },\n  data() { return { transactions: [], strata: { balance: 0, toUsd: 0 }, polling: null } },\n  computed: mapGetters(['isLoggedIn','auth']),\n  methods: {\n    async initValues(values) {\n      if(this.isLoggedIn) {\n        if(values) {\n          this.transactions = values.transactions\n          this.strata = values.strata\n        }else {\n          const records = this.auth.records\n          this.transactions = records.logs\n          this.strata.balance = records.balance ? parseFloat(records.balance).toFixed(4) : '0.0000'\n          const toUsd = await api.convertStrataToUsd(records.balance || '0')\n          this.strata.toUsd = parseFloat(toUsd).toFixed(6)\n        }\n      }\n    },\n    fetchFrom() {\n      if(this.isLoggedIn) {\n        var values = { transactions:null, strata:{ balance:null, toUsd:null } }\n        api.getUserBalances(this.auth.info.walletAddress).then(response => {\n          if(response.status == 1) {\n            window.localStorage.setItem('user_data', JSON.stringify(response.data))\n            values.transactions = response.data.logs\n            values.strata.balance = response.data.balance ? parseFloat(response.data.balance).toFixed(4) : '0.0000'\n            return api.convertStrataToUsd(response.data.balance || '0')\n          }else return 0.0\n        }).then(toUsd => {\n          values.strata.toUsd = parseFloat(toUsd).toFixed(6)\n          this.initValues(values)\n        })\n      }\n    },\n    pollData() {\n      this.initValues()\n      this.polling = setInterval(() => {\n        if(navigator.onLine) this.fetchFrom()\n      }, 3000);\n    }\n  },\n  created() {\n    this.pollData()\n    // if(window.location.href.split(\"#/\")[1] == \"\") this.$router.replace(\"/#buy\")\n  },\n  beforeDestroy() {\n    clearInterval(this.polling)\n  }\n}\n</script>\n\n<style scoped>\n.wallet-footer{\n    border-top: none;\n    padding-top: 0px;\n}\n.balance.p-3 {\n    padding: 1rem !important;\n}\n.card {\n  box-shadow: none;\n  background: none;\n  background-color: none;\n}\n</style>"]}]}