{"remainingRequest":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/babel-loader/lib/index.js!/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/components/Sell.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/components/Sell.vue","mtime":1622745125688},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL21hYy9TaXRlcy9WVUUvZXhjaGFuZ2VhcHAtdmVyc2lvbi1jb250cm9sL3YxL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgYXBpIGZyb20gJy4uL2FwaSc7CmltcG9ydCBBbGVydCBmcm9tICcuL0FsZXJ0LnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2VsbCcsCiAgY29tcG9uZW50czogewogICAgQWxlcnQ6IEFsZXJ0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlzYWJsZWQ6IHRydWUsCiAgICAgIGdhc19mZWU6ICcwLjAwMCcsCiAgICAgIGFtb3VudDogMCwKICAgICAgdXNkX3ZhbHVlOiAwLAogICAgICBhbGVydHM6IHsKICAgICAgICBzaG93OiBmYWxzZSwKICAgICAgICBtc2c6ICcnCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsnYXV0aCddKSksIHt9LCB7CiAgICBiYWxhbmNlOiBmdW5jdGlvbiBiYWxhbmNlKCkgewogICAgICByZXR1cm4gcGFyc2VGbG9hdCh0aGlzLmF1dGgucmVjb3Jkcy5iYWxhbmNlKS50b0ZpeGVkKDYpOwogICAgfQogIH0pLAogIG1ldGhvZHM6IHsKICAgIG1heEFtb3VudDogZnVuY3Rpb24gbWF4QW1vdW50KCkgewogICAgICB0aGlzLmFtb3VudCA9IHRoaXMuYXV0aC5yZWNvcmRzLmJhbGFuY2U7CiAgICAgIHRoaXMuY2FsY0ZlZXMoKTsKICAgIH0sCiAgICBjYWxjRmVlczogZnVuY3Rpb24gY2FsY0ZlZXMoZXZlbnQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuaXNEaXNhYmxlZCgpOwogICAgICB2YXIgdmFsdWUgPSBldmVudCA/IGV2ZW50LnRhcmdldC52YWx1ZSA6IHRoaXMuYW1vdW50OwogICAgICBhcGkuZ2V0R2FzRmVlKHZhbHVlIHx8IDApLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmdhc19mZWUgPSByZXNwb25zZTsKICAgICAgfSk7CiAgICB9LAogICAgY2hlY2tQYXlvdXRTdGF0ZTogZnVuY3Rpb24gY2hlY2tQYXlvdXRTdGF0ZSgpIHsKICAgICAgaWYgKCF0aGlzLmF1dGgub3B0aW9ucy5hZGRyZXNzKSB7CiAgICAgICAgdGhpcy5hbGVydHMuc2hvdyA9IHRydWU7CiAgICAgICAgdGhpcy5hbGVydHMubXNnID0gJ1BsZWFzZSBhZGQgYSBwYXlvdXQgYWRkcmVzcyc7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IGVsc2UgcmV0dXJuIHRydWU7CiAgICB9LAogICAgaXNEaXNhYmxlZDogZnVuY3Rpb24gaXNEaXNhYmxlZCgpIHsKICAgICAgdGhpcy5kaXNhYmxlZCA9IHRoaXMuYW1vdW50ICE9IDAgPyBmYWxzZSA6IHRydWU7CiAgICB9LAogICAgcHJvY2Nlc3M6IGZ1bmN0aW9uIHByb2NjZXNzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBzZWxmID0gdGhpczsgLy8gY292ZXJ0IHVzZCB0byBzdHJhCgogICAgICBhcGkuY29udmVydFN0cmF0YVRvVXNkKE51bWJlcih0aGlzLmFtb3VudCkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgc2VsZi51c2RfdmFsdWUgPSBOdW1iZXIocmVzcG9uc2UpOwogICAgICAgIHJldHVybiBhcGkuc2VuZFRyYW5zYWN0aW9uKHsKICAgICAgICAgIHNlbmRlcjogc2VsZi5hdXRoLmluZm8ud2FsbGV0QWRkcmVzcywKICAgICAgICAgIGFtb3VudDogc2VsZi5hbW91bnQKICAgICAgICB9KTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDEpIHsKICAgICAgICAgIC8vIHN1Y2Nlc3MgYWxlcnQKICAgICAgICAgIHZhciBkb25lX2F1ZGlvID0gbmV3IEF1ZGlvKCdhc3NldHMvYXVkaW8vYXVkaW8xLm1wMycpOwogICAgICAgICAgZG9uZV9hdWRpby5wbGF5KCk7CiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdHJhbnNhY3QiKS5pbm5lckhUTUwgPSAiPGlvbi1pY29uIG5hbWU9XCJjaGVja21hcmstY2lyY2xlLW91dGxpbmVcIj48L2lvbi1pY29uPiI7CiAgICAgICAgICBfdGhpczIuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMi5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdHJhbnNhY3QiKS5pbm5lckhUTUwgPSAiU2VsbCI7CiAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3RyYW5zYWN0IikuaW5uZXJIVE1MID0gIjxpb24taWNvbiBuYW1lPVwiY2xvc2UtY2lyY2xlLW91dGxpbmVcIj48L2lvbi1pY29uPiI7CiAgICAgICAgICBfdGhpczIuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMi5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdHJhbnNhY3QiKS5pbm5lckhUTUwgPSAiU2VsbCI7CiAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuY2hlY2tQYXlvdXRTdGF0ZSgpOwogIH0KfTs="},{"version":3,"sources":["Sell.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"tab-pane fade\" id=\"sell\" role=\"tabpanel\">\n    <div class=\"section mt-2\">\n      <alert v-if=\"alerts.show\" :msg=\"alerts.msg\" />\n      <div class=\"card\">\n        <div class=\"card-body\">\n          <strong>\n          Balance: {{ balance }}  <button @click=\"maxAmount\" class=\"ml-3 btn btn-primary\">MAX</button> \n          </strong>\n          <form @submit.prevent.enter=\"\">\n            <div class=\"form-group basic\">\n              <label class=\"label\">Enter Amount in STRLY</label>\n              <div class=\"input-group mb-1\">\n                <div class=\"input-group-prepend\">\n                  <span style=\"font-size: 20px !important;\" class=\"input-group-text\" id=\"input1\">STRLY</span>\n                </div>\n                <input @keyup=\"calcFees\" v-model=\"amount\" style=\"font-size: 30px !important;\" type=\"text\" class=\"text-center form-control form-control-lg\">\n              </div>\n            </div>\n            <div class=\"form-group basic\">\n              <h6 v-show=\"gas_fee != '0.000'\">Gas Fee: {{ gas_fee }}</h6>\n              <button id=\"transact\" :disabled=\"disabled\" @click=\"proccess\" class=\"btn btn-outline-primary btn-block btn-lg\">SELL</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport api from '../api'\nimport Alert from './Alert.vue'\n\nexport default {\n  name: 'Sell',\n  components: { Alert },\n  data () { return { disabled:true, gas_fee: '0.000', amount:0, usd_value: 0, alerts:{ show:false, msg:'' } } },\n  computed: { \n    ...mapGetters(['auth']),\n    balance() { return parseFloat(this.auth.records.balance).toFixed(6) }\n  },\n  methods: {\n    maxAmount() {\n      this.amount = this.auth.records.balance\n      this.calcFees()\n    },\n    calcFees(event) {\n      this.isDisabled()\n      var value = event ? event.target.value : this.amount\n      api.getGasFee(value || 0).then(response => this.gas_fee = response )\n    },\n    checkPayoutState() {\n      if(!this.auth.options.address) {\n        this.alerts.show = true\n        this.alerts.msg = 'Please add a payout address'\n        return false\n      }else return true\n    },\n    isDisabled() {\n      this.disabled = this.amount != 0 ? false : true\n    },\n    proccess() {\n      var self = this;\n      // covert usd to stra\n      api.convertStrataToUsd(Number(this.amount)).then(response => {\n        self.usd_value = Number(response);\n        return api.sendTransaction({ sender:self.auth.info.walletAddress, amount:self.amount })\n      }).then(response => {\n        if(response.status == 1) {\n          // success alert\n          var done_audio = new Audio('assets/audio/audio1.mp3')\n          done_audio.play()\n          document.querySelector(\"#transact\").innerHTML = `<ion-icon name=\"checkmark-circle-outline\"></ion-icon>`\n          this.disabled = true\n          setTimeout(() => {\n            this.disabled = false\n            document.querySelector(\"#transact\").innerHTML = `Sell`\n          }, 2000);\n        }else {\n          document.querySelector(\"#transact\").innerHTML = `<ion-icon name=\"close-circle-outline\"></ion-icon>`\n          this.disabled = true\n          setTimeout(() => {\n            this.disabled = false\n            document.querySelector(\"#transact\").innerHTML = `Sell`\n          }, 1000);\n        }\n      })\n    }\n  },\n  created() {\n    this.checkPayoutState()\n  }\n}\n</script>\n"],"sourceRoot":"src/components"}]}