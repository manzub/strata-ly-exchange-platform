{"remainingRequest":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/babel-loader/lib/index.js!/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/store/user.js","dependencies":[{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/store/user.js","mtime":1621077464290},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/VUE/exchangeapp-version-control/v1/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYWMvU2l0ZXMvVlVFL2V4Y2hhbmdlYXBwLXZlcnNpb24tY29udHJvbC92MS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCBhcGksIHsgZ2V0VXNlckRldGFpbHMsIHJlZ2lzdGVyIH0gZnJvbSAnLi4vYXBpJzsKaW1wb3J0IHJvdXRlciBmcm9tICcuLi9yb3V0ZXInOwp2YXIgaW5pdGlhbF91c2VyX3N0YXRlID0gewogIHRva2VuOiBudWxsLAogIGluZm86IG51bGwsCiAgcmVjb3JkczogbnVsbAp9OwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHsKICAgIHVzZXI6IHsKICAgICAgdG9rZW46IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSwKICAgICAgaW5mbzogSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSksCiAgICAgIHJlY29yZHM6IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyX2RhdGEnKSkKICAgIH0KICB9LAogIGdldHRlcnM6IHsKICAgIGlzTG9nZ2VkSW46IGZ1bmN0aW9uIGlzTG9nZ2VkSW4oc3RhdGUpIHsKICAgICAgcmV0dXJuICEhc3RhdGUudXNlci50b2tlbjsKICAgIH0sCiAgICBhdXRoOiBmdW5jdGlvbiBhdXRoKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS51c2VyOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzZXRVc2VyOiBmdW5jdGlvbiBzZXRVc2VyKHN0YXRlLCB1c2VyKSB7CiAgICAgIHJldHVybiBzdGF0ZS51c2VyID0gdXNlcjsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICBjb21taXQoJ3NldFVzZXInLCBpbml0aWFsX3VzZXJfc3RhdGUpOwogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpOwogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXJfZGF0YScpOwogICAgICByb3V0ZXIucmVwbGFjZSgiL2hvbWUiKTsKICAgIH0sCiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZjIsIGRhdGEpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY29tbWl0LCBhLCByZXNwb25zZSwgX3Jlc3BvbnNlJGRhdGEsIHN0YXR1cywgdG9rZW47CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgICAgICAgICAgIGEgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5sb2dpbihkYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX3Jlc3BvbnNlJGRhdGEgPSByZXNwb25zZS5kYXRhLCBzdGF0dXMgPSBfcmVzcG9uc2UkZGF0YS5zdGF0dXMsIHRva2VuID0gX3Jlc3BvbnNlJGRhdGEudG9rZW47CgogICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgYSA9IHRva2VuOwogICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdG9rZW4pOwogICAgICAgICAgICAgICAgICBhcGkuZ2V0VXNlckRldGFpbHModG9rZW4pLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeSh1c2VyKSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5nZXRVc2VyQmFsYW5jZXModXNlci53YWxsZXRBZGRyZXNzKTsKICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVjb3JkcykgewogICAgICAgICAgICAgICAgICAgIGlmIChyZWNvcmRzLnN0YXR1cyA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJfZGF0YScsIEpTT04uc3RyaW5naWZ5KHJlY29yZHMuZGF0YSkpOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChzdGF0dXNDb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1c0NvZGUgPT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGluZm8gPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpKTsKICAgICAgICAgICAgICAgICAgICAgIHZhciByZWNvcmRzID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJfZGF0YScpKTsKICAgICAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0VXNlcicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRva2VuLAogICAgICAgICAgICAgICAgICAgICAgICBpbmZvOiBpbmZvLAogICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzOiByZWNvcmRzCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGEpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcmVnaXN0ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyKHN0YXRlLCBkYXRhKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBuYW1lID0gZGF0YS5kbmFtZSwgZW1haWwgPSBkYXRhLmVtYWlsLCBwYXNzd29yZCA9IGRhdGEucGFzc3dvcmQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXBpLnJlZ2lzdGVyKHsKICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLmRhdGEuc3RhdHVzKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/mac/Sites/VUE/exchangeapp-version-control/v1/src/store/user.js"],"names":["api","getUserDetails","register","router","initial_user_state","token","info","records","state","user","window","localStorage","getItem","JSON","parse","getters","isLoggedIn","auth","mutations","setUser","actions","logout","commit","removeItem","replace","login","data","a","response","status","setItem","then","stringify","getUserBalances","walletAddress","statusCode","name","dname","email","password"],"mappings":"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","sourcesContent":["import api, { getUserDetails, register } from '../api'\nimport router from '../router'\n\nconst initial_user_state = { token: null, info: null, records: null }\n\nexport default {\n  state: {\n    user: {\n      token: window.localStorage.getItem('token'),\n      info: JSON.parse(window.localStorage.getItem('user')),\n      records: JSON.parse(window.localStorage.getItem('user_data'))\n    }\n  },\n  getters: {\n    isLoggedIn: state => !!state.user.token,\n    auth: state => state.user\n  },\n  mutations: {\n    setUser: (state, user) => state.user = user\n  },\n  actions: {\n    logout({ commit }) {\n        commit('setUser', initial_user_state)\n        window.localStorage.removeItem('token');\n        window.localStorage.removeItem('user');\n        window.localStorage.removeItem('user_data');\n        router.replace(\"/home\")\n    },\n    async login({ commit }, data) {\n      var a = false;\n      const response = await api.login(data);\n      const { status, token } = response.data;\n      if(status == 200) {\n        a = token;\n        window.localStorage.setItem('token', token)\n        api.getUserDetails(token).then(user => {\n          window.localStorage.setItem('user',JSON.stringify(user))\n          return api.getUserBalances(user.walletAddress)\n        }).then(records => {\n          if(records.status == 1) {\n            window.localStorage.setItem('user_data', JSON.stringify(records.data))\n            return 1\n          }\n        }).then(statusCode => {\n          if(statusCode == 1) {\n            let info = JSON.parse(window.localStorage.getItem('user'))\n            let records = JSON.parse(window.localStorage.getItem('user_data'))\n            commit('setUser', { token, info, records })\n          }\n        })\n      }\n      return a;\n    },\n    async register(state, data) {\n      const { dname:name, email, password } = data;\n      const response = await api.register({name, email, password});\n      return response.data.status;\n    }\n  }\n}\n"]}]}